function[mid_amble,GP]=midamble(K,P,user)
%*********************************************
W=P/K;
Lm=144;
basic=[1,-1,1,1,-1,-1,1,-1,1,-1,1,-1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,1,1,1,1,...
    -1,1,1,1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,1,-1,...
  -1,1,1,-1,1,-1,-1,1,-1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,...
  1,-1,1,1,1,1,-1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,-1,-1,-1,1,1,-1,-1,-1,-1,1,1];
L=Lm+(K-1)*W;
m=zeros(1,L);
for ii=1:L
    if ii<=P
        m(1,ii)=(j^ii)*basic(1,ii);
    else
        m(1,ii)=m(1,ii-P);
    end
end
mid_amble=zeros(1,Lm);
for ii=1:Lm
    mid_amble(1,ii)=m(1,ii+(K-user)*W);
end
GP=2*random('bino',1,0.5,1,16)-1;
for k=1:16
    if(mod(k,2)~=0) %k³ýÒÔ2µÄÓàÊý
        GP(k)=GP(k)*j;
    end
end